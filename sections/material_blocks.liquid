<div class="material_page">
<div class="content-box content-box--large content-box--text-left content-box--center text-container">
{% for block in section.blocks %}
<div class="material_page_contnet_container">
  {% if block.settings.mat_img != blank %}
  <div class="material_block_img_container">
    <img src="{{ block.settings.mat_img | img_url: '4000x' }}" alt="material_img"/>
  </div>
    {% endif %}

  <div class="material_block_content">
      {% if block.settings.heading != blank %}
    <div class="content_heading">
     <h2>{{ block.settings.heading }}</h2> 
    </div>
        {% endif %}
    <div class="content_text_cont" style="display: none;">
{% if block.settings.text != blank %}
      <div class="cont_text">
        {{ block.settings.text }}
      </div>
{% endif %}
      <div class="content_product_cont">
        {% if block.settings.product_list_head  != blank %}
        <div class="content_product_heading">
        <h2>{{ block.settings.product_list_head }}</h2>  
          <div class="content_product_heading_viewAll">
            <a href="{{ block.settings.viewAll_url }}">{{ block.settings.viewAll_text }} </a>
          </div>
        </div>
    {% endif %}

        {% if block.settings.selectedProducts != blank %}
        <div class="content_product_List">
          {% assign selectedProduct = block.settings.selectedProducts %}
        
           {% for product in selectedProduct  %}

              <div class="product_item">  
                <div class="prod_img">
                {% if product.images.size > 0 %}
               <img src="{{ product.images.first | img_url: 'medium' }}" alt="{{ product.title }}">
               {% endif %}
                  </div>
                <div class="product_tile_price">
                 <div class="prod_title">
                    <h3><a href="{{ product.url }}">{{ product.title }}</a></h3>
                 </div>
                <div class="prodt_price">
                  <p>{{ product.price | money }}</p>
                </div>
                </div>
              </div>
            
            {% endfor %}
        </div>
        {% endif %}
      </div>
      
    </div>
    
  </div>
</div>
{% endfor %}
</div>
</div>

<style>

.material_page .material_block_content {  margin-top: 30px;}
.material_page .material_block_content  .content_heading {  font-size: 22px;}
.material_block_content .content_text_cont .cont_text {  font-size: 16px;}
.content_text_cont .content_product_cont .content_product_heading {  display: flex; justify-content: space-between;  align-items: center;}
.material_page .content_text_cont .content_product_cont { margin-top: 50px;}
.content_product_List .product_item {   width: 33.33%;}
.content_product_List {  display: flex; gap: 40px;}
.content_text_cont .content_product_cont .content_product_heading h2 {  font-size: 24px;} 
.material_page_Section { margin-bottom: 50px;}
.material_page .material_page_contnet_container { margin-bottom: 50px;}
.material_page .material_block_content .content_heading h2 {position: relative; cursor:pointer}
.content_heading h2::after {  content: '';  border: 8px solid transparent;  border-top: 8px solid #00b9e2;  position: absolute;   top: 60%;  margin-left: 12px;   transform: translateY(-50%);}

.material_page .product_item .prod_img {  position: relative;  width: 100%;  padding-top: 85%;}
.material_page .product_item .prod_img img {  width: 100%; height: 100%;  position: absolute;  position: absolute; top: 0;  left: 0;  object-fit: cover;}
.material_page  .product_tile_price {   padding-top: 70px;}
.material_page  .prod_title {  margin-bottom: 10px;} 
  
</style>

<script>

  const heading = document.querySelectorAll('.material_block_content .content_heading')
  const content = document.querySelectorAll('.material_block_content .content_text_cont')

  heading.forEach((item,index) => {

    item.addEventListener('click', ()=>{

      console.log("Clicked me...")
      content.forEach((item1,index1) =>{
        
        if(index == index1) {
         
         
          if ( item1.style.display == 'none'){
             item1.style.display = 'block'
          }else{
            item1.style.display = 'none'
          }
 
        }
        
      })
    })
    
  })
  
</script>

{% schema %}
  {
    "name": "Material Page Block",
    "class":"material_page_Section",
    "settings": [],
      "blocks": [
        {
        "name":"Image_Text",
        "type":"block",
        "settings":[
            {
              "type": "image_picker",
              "id":"mat_img",
              "label": "Image"
            },
          {
              "type": "text",
              "id":"heading",
              "label": "Main Heading"
            },
          {
            "type": "richtext",
            "id":"text",
            "label": "Text Content"
          },
          {
            "type": "header",
            "content": "Product List Block"
          },
          {
            "type": "text",
            "id":"product_list_head",
            "label": "Product List Heading"
          },
          {
             "type": "text",
            "id":"viewAll_text",
            "label": "View All Button Text"
          },
            {
             "type": "url",
            "id":"viewAll_url",
            "label": "View All Button Url"
          },
          {
            "type": "product_list",
            "id": "selectedProducts",
            "label": "Select Products"
          }
          ]
        }
      ],
    "presets": [
    {
      "name": "Material Page Block",
      
    }
  ]
  }
{% endschema %}